---
import ThemeToggle from "../ui/ThemeToggle";
import SideNavigation from "../ui/SideNavigation";
import { Image } from "astro:assets";
import Logo from "@/assets/logos/logo.svg";
---

<nav
  class="fixed top-0 left-0 right-0 z-50 glass-card border-b border-white/20 backdrop-blur-lg transition-all duration-300"
  id="main-nav"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
        <Image src={Logo} alt="Logo" class="w-8 h-8" />
        <span class="font-bold text-lg gradient-text hidden sm:inline font-mono">Farhan</span>
      </a>

      <!-- Desktop Navigation with Numbers -->
      <div class="hidden md:flex items-center gap-6">
        <a
          href="/#about"
          class="text-sm text-textPrimary hover:text-accent-indigo transition-colors font-medium font-mono"
        >
          <span class="opacity-60">01.</span> About
        </a>
        <a
          href="/#experience"
          class="text-sm text-textPrimary hover:text-accent-indigo transition-colors font-medium font-mono"
        >
          <span class="opacity-60">02.</span> Experience
        </a>
        <a
          href="/#projects"
          class="text-sm text-textPrimary hover:text-accent-indigo transition-colors font-medium font-mono"
        >
          <span class="opacity-60">03.</span> Projects
        </a>
        <a
          href="/#skills"
          class="text-sm text-textPrimary hover:text-accent-indigo transition-colors font-medium font-mono"
        >
          <span class="opacity-60">04.</span> Skills
        </a>
        <a
          href="/#contact"
          class="text-sm text-textPrimary hover:text-accent-indigo transition-colors font-medium font-mono"
        >
          <span class="opacity-60">05.</span> Contact
        </a>
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-4">
        <ThemeToggle client:load />
        <a
          href="/#contact"
          class="hidden sm:inline-block px-4 py-2 bg-gradient-to-r from-accent-indigo to-accent-purple text-white rounded-lg text-sm font-medium hover:shadow-glow-indigo transition-all"
        >
          Get In Touch
        </a>
        
        <!-- Mobile menu button -->
        <button
          id="mobile-menu-button"
          class="md:hidden p-2 text-textPrimary hover:text-accent-indigo transition-colors"
          aria-label="Toggle menu"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu with Numbers -->
  <div
    id="mobile-menu"
    class="hidden md:hidden glass-card border-t border-white/20"
  >
    <div class="px-4 py-4 space-y-2">
      <a
        href="/#about"
        class="block text-textPrimary hover:text-accent-indigo transition-colors font-medium py-2 font-mono text-sm"
      >
        <span class="opacity-60">01.</span> About
      </a>
      <a
        href="/#experience"
        class="block text-textPrimary hover:text-accent-indigo transition-colors font-medium py-2 font-mono text-sm"
      >
        <span class="opacity-60">02.</span> Experience
      </a>
      <a
        href="/#projects"
        class="block text-textPrimary hover:text-accent-indigo transition-colors font-medium py-2 font-mono text-sm"
      >
        <span class="opacity-60">03.</span> Projects
      </a>
      <a
        href="/#skills"
        class="block text-textPrimary hover:text-accent-indigo transition-colors font-medium py-2 font-mono text-sm"
      >
        <span class="opacity-60">04.</span> Skills
      </a>
      <a
        href="/#contact"
        class="block text-textPrimary hover:text-accent-indigo transition-colors font-medium py-2 font-mono text-sm"
      >
        <span class="opacity-60">05.</span> Contact
      </a>
      <a
        href="/#contact"
        class="block w-full px-6 py-3 bg-gradient-to-r from-accent-indigo to-accent-purple text-white rounded-lg font-medium text-center mt-4"
      >
        Get In Touch
      </a>
    </div>
  </div>
</nav>

<!-- Side Navigation (Desktop only) -->
<SideNavigation client:only="react" />

<script>
  // Mobile menu toggle
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  menuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Close mobile menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!menuButton?.contains(e.target as Node) && !mobileMenu?.contains(e.target as Node)) {
      mobileMenu?.classList.add('hidden');
    }
  });

  // Smooth scroll behavior for anchor links
  document.querySelectorAll('a[href^="/#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href')?.substring(1) || '');
      if (target) {
        target.scrollIntoView({ behavior: 'smooth' });
        mobileMenu?.classList.add('hidden');
      }
    });
  });

  // Add scroll effect to nav
  let lastScroll = 0;
  const nav = document.getElementById('main-nav');

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll <= 0) {
      nav?.classList.remove('shadow-lg');
    } else {
      nav?.classList.add('shadow-lg');
    }

    lastScroll = currentScroll;
  });
</script>


