---
import Layout from "../layouts/BaseLayout.astro";
import HeroSectionPremium from "../components/sections/HeroSectionPremium.astro";
import SectionNumber from "../components/common/SectionNumber.astro";
import ClientLogos from "../components/sections/ClientLogos.astro";
import ProjectCardPremium from "../components/common/ProjectCardPremium";
import { projects } from "../data/projects";
import SuperPowerCardPremium from "../components/common/SuperPowerCardPremium";
import GitHubStats from "../components/sections/GitHubStats";
import Awards from "../components/sections/Awards.astro";
import Process from "../components/sections/Process.astro";
import ParallaxSection from "../components/effects/ParallaxSection";
import PlaygroundShowcase from "../components/sections/PlaygroundShowcase.astro";
import ServicesPremium from "../components/sections/ServicesPremium.astro";
import Timeline from "../components/sections/Timeline.astro";
import AboutSection from "../components/sections/AboutSection.astro";
import TestimonialCarousel from "../components/common/TestimonialCarousel";
import ContactCTAPremium from "../components/sections/ContactCTAPremium.astro";
import Divider from "../components/common/Divider.astro";
import { Image } from "astro:assets";
import DrawLines from "@/assets/icons/drawingLines.svg";
import SuperIcon from "@/assets/icons/Super-icon.svg";
import CodeCircle from "@/assets/icons/code-circle.svg";
import BackEnd from "@/assets/icons/backend-icon.svg";
import Driver from "@/assets/icons/driver.svg";
import CloudAdd from "@/assets/icons/cloud-add.svg";
import { getImage } from "astro:assets";

// Convert icons to URLs for React components - using Image component to generate URL
const codeCircleImg = await getImage({ src: CodeCircle });
const backendImg = await getImage({ src: BackEnd });
const driverImg = await getImage({ src: Driver });
const cloudAddImg = await getImage({ src: CloudAdd });

const superPowers = [
  {
    title: "Frontend Development",
    icon: codeCircleImg.src,
    description: "Creating fast, responsive, and user-friendly interfaces for seamless digital experiences.",
    bgColor: "bg-[#ECDFE6]",
    skills: ["React", "Next.js", "TypeScript", "Tailwind CSS", "Vue.js"],
    proficiency: 95,
  },
  {
    title: "Backend Development",
    icon: backendImg.src,
    description: "Building secure, scalable, and high-performance backend solutions.",
    bgColor: "bg-[#E9EBE8]",
    skills: ["Node.js", "Python", "Express", "FastAPI", "PostgreSQL"],
    proficiency: 92,
  },
  {
    title: "Database Systems",
    icon: driverImg.src,
    description: "Efficient, secure, and scalable database solutions for seamless data management.",
    bgColor: "bg-[#FBEDE0]",
    skills: ["PostgreSQL", "MongoDB", "Redis", "MySQL", "Prisma"],
    proficiency: 90,
  },
  {
    title: "DevOps & Cloud",
    icon: cloudAddImg.src,
    description: "Streamlining deployment, scalability, and security with cutting-edge cloud solutions.",
    bgColor: "bg-[#e7f0f2]",
    skills: ["AWS", "Docker", "Kubernetes", "CI/CD", "Terraform"],
    proficiency: 88,
  },
];

// Testimonials with correct image paths
const testimonials = [
  {
    name: "Ahmed Hassan",
    role: "CTO",
    company: "DevelMo",
    image: "/assets/images/love-letters/ahmed.png",
    quote: "Farhan delivered exceptional work on our CrowdIQ platform. His expertise in computer vision and real-time analytics exceeded our expectations. The system now processes video feeds with 98% accuracy.",
    rating: 5,
  },
  {
    name: "Sarah Mitchell",
    role: "Product Manager",
    company: "TechCorp",
    image: "/assets/images/love-letters/shahzeb.jpeg",
    quote: "Working with Farhan was a game-changer for our project. He transformed our requirements into a beautiful, performant application. His attention to detail and technical prowess is outstanding.",
    rating: 5,
  },
  {
    name: "Talha Rahman",
    role: "Business Owner",
    company: "MMKEN",
    image: "/assets/images/love-letters/talha.jpeg",
    quote: "The marketplace platform Farhan built has been instrumental in our growth. It's handling thousands of transactions seamlessly. His full-stack expertise and problem-solving skills are top-notch.",
    rating: 5,
  },
  {
    name: "Zach Williams",
    role: "Startup Founder",
    company: "InnovateLabs",
    image: "/assets/images/love-letters/zach.jpeg",
    quote: "Farhan's ability to understand complex requirements and deliver elegant solutions is remarkable. He built our AI-powered tool from scratch, and it's now our flagship product.",
    rating: 5,
  },
];
---

<Layout>
  <main id="main-content" class="flex flex-col" role="main">
    <!-- Premium Hero Section -->
    <HeroSectionPremium />

    <!-- Client Logos for Credibility -->
    <section class="py-12">
      <ClientLogos />
    </section>

    <Divider />

    <!-- 01. About Section -->
    <section id="about" class="scroll-mt-20 py-24 sm:py-32 relative overflow-hidden section-bg-alt" aria-labelledby="about-heading">
      <!-- Layered approach: gradient wash background -->
      <div class="absolute inset-0 bg-gradient-wash"></div>
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <SectionNumber number="01.">
          <h2 id="about-heading" class="font-heading">About Me</h2>
        </SectionNumber>
        <AboutSection />
      </div>
    </section>

    <Divider />

    <!-- 02. Experience Section -->
    <section id="experience" class="scroll-mt-20 py-24 sm:py-32 relative overflow-hidden section-bg-subtle" aria-labelledby="experience-heading">
      <!-- Layered approach: subtle blue wash -->
      <div class="absolute inset-0 bg-gradient-wash-subtle-blue"></div>
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <SectionNumber number="02.">
          <h2 id="experience-heading" class="font-heading">Where I've Worked</h2>
        </SectionNumber>
        <Timeline />
      </div>
    </section>

    <Divider />

    <!-- 03. Projects Section -->
    <section id="projects" class="scroll-mt-20 py-24 sm:py-32 relative overflow-hidden section-bg-alt" aria-labelledby="projects-heading">
      <!-- Layered approach: gradient wash -->
      <div class="absolute inset-0 bg-gradient-wash-light"></div>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <SectionNumber number="03.">
          <h2 id="projects-heading" class="font-heading">Some Things I've Built</h2>
        </SectionNumber>
        
        <p class="text-body-lg text-textSecondary max-w-2xl mb-16 mt-4">
          Featured projects showcasing my work on full-stack applications, AI/ML systems, 
          and cloud infrastructure.
        </p>

        <!-- Featured Projects - Alternating Layout -->
        <div class="space-y-32">
          {projects.filter(p => p.featured).map((project, index) => (
            <div class={`flex flex-col lg:flex-row gap-8 items-center ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}>
              <div class={`flex-1 ${index % 2 === 0 ? 'lg:order-1' : 'lg:order-2'}`}>
                <ProjectCardPremium client:only="react" project={project} index={index} />
              </div>
              <div class={`flex-1 space-y-4 ${index % 2 === 0 ? 'lg:order-2' : 'lg:order-1'}`}>
                <div class="flex items-center gap-3">
                  <span class="text-code text-accent-blue opacity-60">Featured Project</span>
                </div>
                <h3 class="text-3xl md:text-4xl font-heading font-bold text-textPrimary">{project.title}</h3>
                <div class="liquid-glass-card p-6 rounded-3xl">
                  <p class="text-body text-textSecondary mb-4">{project.shortDescription}</p>
                  <div class="flex flex-wrap gap-2 mb-4">
                    {project.techStack.slice(0, 5).map((tech) => (
                      <span class="text-code text-textTertiary text-sm">{tech.name}</span>
                    ))}
                  </div>
                  <div class="flex gap-4">
                    {project.liveUrl && (
                      <a href={project.liveUrl} target="_blank" rel="noopener noreferrer" 
                         class="text-accent-blue hover:bg-glass-tinted transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-accent-blue focus:ring-offset-2 rounded-lg px-3 py-2 min-h-[44px] flex items-center liquid-glass-button"
                         aria-label={`Visit ${project.title} live demo (opens in new tab)`}>
                        <span class="flex items-center gap-2">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                          </svg>
                          View Live
                        </span>
                      </a>
                    )}
                    {project.githubUrl && (
                      <a href={project.githubUrl} target="_blank" rel="noopener noreferrer"
                         class="text-accent-blue hover:bg-glass-tinted transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-accent-blue focus:ring-offset-2 rounded-lg px-3 py-2 min-h-[44px] flex items-center liquid-glass-button"
                         aria-label={`View ${project.title} source code on GitHub (opens in new tab)`}>
                        <span class="flex items-center gap-2">
                          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path>
                          </svg>
                          View Code
                        </span>
                      </a>
                    )}
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>

        <!-- Other Projects Grid -->
        <div class="mt-32">
          <h3 class="text-2xl font-heading font-bold mb-8 text-center text-textPrimary">Other Noteworthy Projects</h3>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {projects.filter(p => !p.featured).map((project, index) => (
              <div class={`liquid-glass-card p-6 rounded-3xl liquid-glass-hover transition-all`}>
                <h4 class="text-xl font-bold mb-2 text-textPrimary">{project.title}</h4>
                <p class="text-sm text-textSecondary mb-4 leading-relaxed">{project.shortDescription}</p>
                <div class="flex flex-wrap gap-2 mb-4">
                  {project.techStack.slice(0, 4).map((tech) => (
                    <span class="text-xs text-code text-textTertiary">{tech.name}</span>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <Divider />

    <!-- 04. Skills Section -->
    <section id="skills" class="scroll-mt-20 py-24 sm:py-32 relative overflow-hidden section-bg-subtle" aria-labelledby="skills-heading">
      <!-- Layered approach: blue radial wash -->
      <div class="absolute inset-0 bg-gradient-wash-blue"></div>
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <SectionNumber number="04.">
          <h2 id="skills-heading" class="font-heading">Skills & Technologies</h2>
        </SectionNumber>
        
        <p class="text-body-lg text-textSecondary max-w-2xl mb-16 mt-4">
          Technologies and tools I work with to build exceptional digital experiences.
        </p>

        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center">
          {superPowers.map((power) => (
            <SuperPowerCardPremium client:only="react" {...power} />
          ))}
        </div>
      </div>
    </section>

    <Divider />

    <!-- 05. Testimonials Section -->
    <section id="testimonials" class="scroll-mt-20 py-24 sm:py-32 relative overflow-hidden section-bg-alt" aria-labelledby="testimonials-heading">
      <!-- Layered approach: gradient wash -->
      <div class="absolute inset-0 bg-gradient-wash-medium"></div>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <SectionNumber number="05.">
          <h2 id="testimonials-heading" class="font-heading">What Clients Say</h2>
        </SectionNumber>
        <p class="text-body-lg text-textSecondary max-w-2xl mb-16 mt-4">
          Hear directly from clients about their experience working with me and the impact of our collaborations.
        </p>
        <TestimonialCarousel client:only="react" testimonials={testimonials} />
      </div>
    </section>

    <Divider />

    <!-- 06. Contact Section -->
    <section id="contact" class="scroll-mt-20 py-24 sm:py-32 relative overflow-hidden section-bg-subtle" aria-labelledby="contact-heading">
      <!-- Layered approach: subtle blue wash -->
      <div class="absolute inset-0 bg-gradient-wash-subtle-blue"></div>
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <SectionNumber number="06.">
          <h2 id="contact-heading" class="font-heading">Get In Touch</h2>
        </SectionNumber>
        
        <div class="mt-16">
          <ContactCTAPremium />
        </div>
      </div>
    </section>
  </main>
</Layout>

<!-- Expose projects data for search -->
<script is:inline define:vars={{ projects }}>
  // Make projects data available for search component
  if (typeof window !== 'undefined') {
    (window as any).__PROJECTS_DATA__ = projects.map((p: any) => ({
      id: p.id,
      title: p.title,
      shortDescription: p.shortDescription,
      description: p.fullDescription,
      tags: p.tags,
      techStack: p.techStack,
    }));
  }
</script>
